\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{natbib}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{yfonts}
\usepackage{hyperref}
\usepackage{mathtools}
\usepackage{amsthm}
\usepackage{geometry}
\usepackage{tikz-cd}

\geometry{
 a4paper,
 total={170mm,257mm},
 left=35mm,
 right=35mm,
 top=20mm,
 }

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
}

\urlstyle{same}
%\newcommand{\goth}[1]{\text{\textgoth{#1}}

\title{Facts about Rings of Fractions}
\author{Rafal Michalski}
\date{}

\newtheorem{theorem}{Fact}[section]
\newtheorem{example}[theorem]{Example}

\begin{document} 

\maketitle

\section{Introduction}

\begin{theorem}
If $0 \in S$, then $S^{-1}A$ is a trivial ring.
\end{theorem}

\noindent
\textit{Proof.} Any $(a, s), (a', s')$ are related because $(as' - a's) \cdot 0 = 0$ with $0 \in S$. \qed

\begin{theorem}
$A$ a PID, the equivalence relation in $ A \times S $ is: $ (a, s) \equiv (a', s') $ iff $ as' = a's $. \qed
\end{theorem}


\vspace{2em}

\begin{theorem}
For $A$ a field, and $S = \{-1, 1\}$, $S^{-1}A \cong A$.
\end{theorem}

\noindent
\textit{Proof.} It is easily verified that the standard isomorphism from $A$ to $S^{-1}A$ is 1-1 and onto. \qed

\begin{theorem}
For $A$ a field, and $S$ a multiplicatively closed subset of $A$ not containing zero, $S^{-1}A \cong A$.
\end{theorem}

\noindent
\textit{Proof.} The standard homomorphism $f:a \mapsto a/1$ of $A$ into $S^{-1}A$ is injectve: if $a/1 = a'/1$ then $a \cdot 1 = a1 \cdot 1$, then $a = a'$. It is surjective: $f(as^{-1}) = f(a)f(s^{-1}) = (a/1)(s^{-1}/1) = \ldots$, but $s^{-1}/1 = 1/s$ as $s^{-1}s = 1 \cdot 1$; continuing, $\ldots = (a/1)(1/s) = a/s$. \qed

\begin{theorem}
For $A$ a field, the ring of fractions and the field of fractions are isomorphic.
\end{theorem}

\noindent
\textit{Proof.} For isomorphism of $A$ with its field of fractions, see Math Exchange 79188. About the isomorphism with its ring of fractions, is the fact above. \qed

\begin{example}
Some example.
\end{example}

\begin{theorem}
The quotient ring $A/I$ can be viewed as an $A$-module, and then the ring of fractions $T^{-1}(A/I)$, where $T$ is the image of $S$ in $A/I$, equals the module of fractions $S^{-1}(A/I)$.
\end{theorem} 

\noindent
\textit{Proof.} On the left, the relation is in $ (A/I) \times T $: $ ([a], [s]) \equiv ([a'], [s']) $ iff (ring notation) $([a][s'] - [a'][s]) [s''] = [0]$ iff $[as's'' - a'ss''] = [0]$. On the right, the relation works in $ (A/I) \times S $: $ ([a], s) \equiv ([a'], s') $ iff (module notation) $s'' (s'[a] - s[a']) = [0]$ iff $[as's'' - a'ss''] = [0]$. The conditions are identical so the classes must be in bijective correspondence. However, they are not identical as sets, so saying \textit{equals} is too much.
\qed

\begin{theorem}
What is $S^{-1}\textgoth{a}$?
\end{theorem}

\noindent
It can be either an $S^{-1}A$-module $S^{-1}\textgoth{a}$, because $\textgoth{a}$ is an $A$-module, or the extension $S^{-1}\textgoth{a} = \textgoth{a} \: S^{-1}A$ in $S^{-1}A$ of the ideal $\textgoth{a}$ in $A$ via the canonical $A \rightarrow S^{-1}A: a \mapsto a/s$. In both cases elements of $S^{-1}\textgoth{a}$ are written as $a/s$ with $a \in \textgoth{a}$, $s \in S$, but they come from different sets. In the first, module case, $a/s$ is in the quotient of $\textgoth{a} \times S$, in the second, extension ideal case, $a/s$ is in the quotient of $A \times S$. We are talking of $S^{-1}A$-modules, not rings, so there can only be an $S^{-1}A$-module isomorphism, which is obvious:
\[
  \textgoth{a} \times S / \sim_\textgoth{a} \; \; \ni \; a/s \mapsto a/s \; \in \; A \times S / \sim_A
\]
\qed

\begin{theorem}
Case $\textgoth{a} = \textgoth{p}$, a prime ideal. What is $S^{-1}\textgoth{p}$?
\end{theorem}

\noindent
It can be either the $A_\textgoth{p}$-module $\textgoth{p}_\textgoth{p}$, because $\textgoth{p}$ is an $A$-module, or the extension $\textgoth{p} A_\textgoth{p}$ in $A_\textgoth{p}$ of the ideal $\textgoth{p}$ in $A$, via the canonical $A \rightarrow A_\textgoth{p} : a \mapsto a/s$. Looks like we don't have the $\cdot_\textgoth{p}$-instead-of-$S^{-1} \cdot$ notation in the ideal extension case, but then, the quotient notation $ A_\textgoth{p} / \textgoth{p}_\textgoth{p}$ is used, which makes sense only if $\textgoth{p}_\textgoth{p}$ is an ideal in $A_\textgoth{p}$
\[
   \textgoth{p}_\textgoth{p} = \textgoth{p} \: A_\textgoth{p}
\]
\qed

\begin{theorem}
How is $B_\textgoth{q}$ an $A_\textgoth{p}$-module?
\end{theorem}

\noindent
Let $g = \psi \circ f$ be the composition $A \rightarrow B \rightarrow T^{-1}B : a \rightarrow f(a) \rightarrow f(a)/1 $. This composition sends $s \in S$ to a unit in $T^{-1}B$, as $(f(s)/1)(1/f(s)) = 1/1$, where $f(s) \in f(S) = f(A \setminus \textgoth{p}) \subseteq B \setminus \textgoth{q} = T$. By the universal property of the ring of fractions, $g$ factorizes
\[
     \begin{tikzcd}
     A \arrow{r}{\phi} \arrow{d}{f} \arrow{dr}{\eta} & S^{-1}A \arrow{d}{h} \\
     B \arrow{r}{\psi} & T^{-1}B
     \end{tikzcd}
\]

\noindent
where the recipe for $h$ is given in \textbf{Proposition 3.1} of [ItCA] as $a/s \mapsto g(a)g(s)^{-1} = (f(a)/1)(1/f(s)) = f(a)/f(s)$.
\qed

\begin{theorem}
How is $B_\textgoth{q} / \textgoth{q}_\textgoth{q}$ an $A_\textgoth{p} / \textgoth{p}_\textgoth{p}$-module?
\end{theorem}

\noindent
The kernel of the composition $A_\textgoth{p} \rightarrow B_\textgoth{q} \rightarrow B_\textgoth{q} / \textgoth{q} B_\textgoth{q}$ : $a/s \mapsto f(a)/f(s) + \textgoth{q} B_\textgoth{q}$ contains $\textgoth{p} A_\textgoth{p}$ (because $\textgoth{p} = f^{-1}(\textgoth{q})$) so the composition factors through $A_\textgoth{p} / \textgoth{p} A_\textgoth{p} \rightarrow B_\textgoth{q} / \textgoth{q} B_\textgoth{q}$: $a/s + \textgoth{p} A_\textgoth{p} \mapsto f(a)/f(s) + \textgoth{q} B_\textgoth{q}$. This is a ring homomorphism that makes $B_\textgoth{q} / \textgoth{q}_\textgoth{q}$ an $A_\textgoth{p} / \textgoth{p}_\textgoth{p}$-module.
\qed

\begin{theorem}
What is $\textgoth{p} M_\textgoth{p}$ ?
\end{theorem}

\noindent
When $M_\textgoth{p}$ is seen as an $A$-module, $\textgoth{p} M_\textgoth{p} = \{am/s: a \in \textgoth{p}, m \in M, s \notin \textgoth{p} \}$. When $M_\textgoth{p}$ is seen as an $A_\textgoth{p}$-module, $\textgoth{p}$ is not even an ideal in $A_\textgoth{p}$, but its extension, $\textgoth{p} A_\textgoth{p}$ is, and $(\textgoth{p} A_\textgoth{p}) M_\textgoth{p} = \{(a/s')(m/s): a \in \textgoth{p}, m \in M, s, s' \notin \textgoth{p} \} = \{am/s: a \in \textgoth{p}, m \in M, s \notin \textgoth{p} \}$, the same set, which we write $\textgoth{p} M_\textgoth{p}$ for:

\[
  \textgoth{p} M_\textgoth{p} = (\textgoth{p} A_\textgoth{p}) M_\textgoth{p}
\]
\qed

\begin{theorem}
How
\[
\frac{(B \otimes_A M)_\textgoth{q}}{\textgoth{q} (B \otimes_A M)_\textgoth{q}} 
\cong
\frac{B_\textgoth{q}}{\textgoth{q}_\textgoth{q}} \otimes_B B \otimes_A M
\]
?
\end{theorem}

\noindent
Proposition 3.5 states, in the language of subscript-$\textgoth{p}$, that $M_\textgoth{p} \cong A_\textgoth{p} \otimes_A M$ over $A_\textgoth{p}$. Here $(B \otimes_A M)_\textgoth{q} \cong B_\textgoth{q} \otimes_B (B \otimes_A M)$. Then

\begin{gather*}
\frac{B_\textgoth{q} \otimes_B (B \otimes_A M)}{(\textgoth{q} B_\textgoth{q})(B_\textgoth{q} \otimes_B (B \otimes_A M))}
\cong
\frac{B_\textgoth{q}}{\textgoth{q} B_\textgoth{q}} \otimes_{B_\textgoth{q}} (B_\textgoth{q} \otimes_B (B \otimes_A M)) \\
\cong
\frac{B_\textgoth{q}}{\textgoth{q}_\textgoth{q}} \otimes_B B \otimes_A M
\end{gather*}
\qed

In P. Y. Gaillard solution to ItCA Exercise 3.19 (viii).

\begin{theorem}
The diagram
\[
     \begin{tikzcd}
     A_\textgoth{p} \arrow{r}{\phi} \arrow{d}{f} \arrow{dr}{\eta} & A_\textgoth{p}/\textgoth{p}A_\textgoth{p} \arrow{d}{h} \\
     B_\textgoth{q} \arrow{r}{\psi} & B_\textgoth{q}/\textgoth{q}B_\textgoth{q}
     \end{tikzcd}
\]

\[
     \begin{tikzcd}
     a/s \arrow[r, mapsto, "\phi"] \arrow[d, mapsto, "f"] \arrow[dr, mapsto, "\eta"] & a/s + \textgoth{p}A_\textgoth{p} \arrow[d, mapsto, "h"] \\
     f(a)/f(s) \arrow[r, mapsto, "\psi"] & f(a)/f(s) + \textgoth{q}B_\textgoth{q}
     \end{tikzcd}
\]
is commutative.
\end{theorem}

% \noindent
All calculated on the diagram. \qed

Now $\kappa_\textgoth{q} = B_\textgoth{q}/\textgoth{q}B_\textgoth{q}$ is an $A_\textgoth{p}$-module by $A_\textgoth{p} \rightarrow A_\textgoth{p}/\textgoth{p}A_\textgoth{p} \rightarrow B_\textgoth{q}/\textgoth{q}B_\textgoth{q}$ (with the formula as on the bottom diagram) and we may tensor over $A_\textgoth{p}$. 

If a field $K$ is an $A$-module for some ring $A$, can it be a zero $A$-module?
\[
 1_A 1_K = 1_k \ne 0_K
\]
It cannot.

Now that $\kappa_\textgoth{q} \otimes_{A_\textgoth{p}} M_\textgoth{p}/\textgoth{p}M_\textgoth{p} = 0$, both tensorands finitely generated, and $\kappa_\textgoth{q} \ne 0$, it must be $M_\textgoth{p}/\textgoth{p}M_\textgoth{p} = 0$ by ItCA Exercise 2.3. 

In solution of ItCA 3.19 (viii) by J. D. Taylor.

\begin{theorem}
What is $\textgoth{p} B$?
\end{theorem}

% \noindent
For $f: A \rightarrow B$, we can think in two ways. As we identify $ab = f(a)b$,  $\textgoth{p} B = \{ ab = f(a)b : a \in \textgoth{p}, b \in B \}$ is the extension $f(\textgoth{p}) B$ of the ideal $\textgoth{p}$. The second way is that $B$ is an $A$-module, and $\textgoth{p}$ a prime ideal in $A$, so we can form $ \textgoth{p} B = \{ \sum a_i b_i = \sum f(a_i)b_i \} $ with $a_i \in \textgoth{p}$, $b_i \in B$, getting the same set.

\qed

\begin{theorem}
What is $ B_\textgoth{p}$?
\end{theorem}

% \noindent
Since $B$ is an $A$-module, $ B_\textgoth{p}$ consists of all elements $b / s$ where $b \in B, s \in A \setminus \textgoth{p}$. $B \textgoth{p}$ is:

\begin{itemize}
 \item An $A$-module.
 \item An $A_\textgoth{p}$-module: the construction of $S^{-1}A$-module $S^{-1}M$ in the text.
 \item A $B$-module.
 \item A ring.
\end{itemize}


\qed



\section{Saturated}

\begin{theorem}
For saturated $S$, if $f(a)$ is a unit in $S^{-1}A$, then $a \in S$.
\end{theorem}

\noindent
\textit{Proof.}
\[
  \frac{a}{1} \cdot \frac{b}{t} = \frac{1}{1} 
\]

\[
  \frac{ab}{t} = \frac{1}{1}
\]

\[
   (ab, t) \equiv (1, 1)
\]
 
\[
   (ab - t)u = 0
\]

\[
   abu = tu
\]

\[
   abu \in S
\]

As \( S \) is saturated, \( a \in S \).  \qed



\end{document}S
